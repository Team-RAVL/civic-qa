(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{168:function(e,t,a){},169:function(e,t,a){},201:function(e,t,a){},202:function(e,t,a){},205:function(e,t,a){},206:function(e,t,a){},207:function(e,t,a){},338:function(e,t,a){},339:function(e,t,a){},340:function(e,t,a){},341:function(e,t,a){},342:function(e,t,a){},343:function(e,t,a){},344:function(e,t,a){},345:function(e,t,a){},346:function(e,t,a){"use strict";a.r(t);var s=a(45),n=a.n(s),r=a(22),c=a(79),i=a(60),o=a(69),u={auth:localStorage.getItem("Authorization")||""},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_AUTH":return Object(o.a)(Object(o.a)({},e),{},{auth:t.payload});default:return e}},j={path:"/dashboard"},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PATH":return Object(o.a)(Object(o.a)({},e),{},{path:t.payload});default:return e}},b=Object(i.b)({path:d,auth:l}),h=Object(i.c)(b),m=a(8),p=a.n(m),f=a(14),O=a(4),v=(a(201),a(0)),g=a(21),x=(a(202),a(1));function w(){return Object(x.jsxs)("div",{className:"profile-heading",children:[Object(x.jsx)("p",{className:"profile-name",children:"Profile Name"}),Object(x.jsx)("svg",{height:"100",width:"100",children:Object(x.jsx)("circle",{cx:"25",cy:"25",r:"24",stroke:"#DFE0EB","stroke-width":"1",fill:"white"})})]})}var N="Form Inquiries",y="#9B51E0";function k(e){var t=Object(g.f)(),a=Object(c.c)((function(e){return e.path})).path,s=Object(c.b)();return Object(v.useEffect)((function(){!function(e){s({type:"SET_PATH",payload:e})}(t.pathname)}),[t]),Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:"profile-header",children:Object(x.jsx)(w,{})}),Object(x.jsxs)("nav",{className:"nav-bar",children:[Object(x.jsx)("h1",{className:"title",children:"Civic QA"}),Object(x.jsxs)("ul",{children:[Object(x.jsxs)("li",{children:["/dashboard"==a?Object(x.jsx)("img",{className:"icon",src:"./assets/icons/pie-chart-active.svg"}):Object(x.jsx)("img",{className:"icon",src:"./assets/icons/pie-chart.svg"}),Object(x.jsx)(r.b,{className:"nav-link",activeClassName:"active-link",to:"/dashboard",children:"Dashboard"})]}),Object(x.jsx)("li",{className:"dashboard-sub-li",children:Object(x.jsx)(r.b,{className:"nav-link",activeClassName:"active-link",to:"/general",children:"General Topics"})}),Object(x.jsx)("li",{className:"dashboard-sub-li",children:Object(x.jsx)(r.b,{className:"nav-link",activeClassName:"active-link",to:"/casework",children:"Casework Topics"})}),Object(x.jsxs)("li",{children:["/inquiries"==a?Object(x.jsx)("img",{className:"icon",src:"./assets/icons/inbox-active.svg"}):Object(x.jsx)("img",{className:"icon",src:"./assets/icons/inbox.svg"}),Object(x.jsx)(r.b,{className:"nav-link",activeClassName:"active-link",to:"/inquiries",children:N})]}),Object(x.jsxs)("li",{children:["/forms"==a?Object(x.jsx)("img",{className:"icon",src:"./assets/icons/inbox-active.svg"}):Object(x.jsx)("img",{className:"icon",src:"./assets/icons/inbox.svg"}),Object(x.jsx)(r.b,{className:"nav-link",activeClassName:"active-link",to:"/forms",children:"Your Forms"})]}),Object(x.jsxs)("li",{children:["/engagement-reports"==a?Object(x.jsx)("img",{className:"icon",src:"./assets/icons/stats-active.svg"}):Object(x.jsx)("img",{className:"icon",src:"./assets/icons/stats.svg"}),Object(x.jsx)(r.b,{className:"nav-link",activeClassName:"active-link",to:"/engagement-reports",children:"Engagement Reports"})]})]}),Object(x.jsx)("div",{className:"compose-email-btn-container",children:Object(x.jsx)("hr",{className:"solid"})}),Object(x.jsxs)("ul",{children:[Object(x.jsxs)("li",{children:["/settings"==a?Object(x.jsx)("img",{className:"icon",src:"./assets/icons/settings-active.svg"}):Object(x.jsx)("img",{className:"icon",src:"./assets/icons/settings.svg"}),Object(x.jsx)(r.b,{className:"nav-link",activeClassName:"active-link",to:"/settings",children:"Settings"})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("img",{className:"icon",src:"./assets/icons/logout.svg"}),Object(x.jsx)("button",{className:"logout-btn",onClick:function(){e.userLogout(),g.a},children:"Logout"})]})]})]})]})}a(205);function S(e){return Object(x.jsxs)("div",{className:"stat-card",children:[Object(x.jsx)("h1",{className:"stat-card-title",children:e.title}),Object(x.jsx)("p",{className:"stat-card-data",children:e.stat})]})}a(206);function E(e){var t=[];return e.cards.forEach((function(e){return t.push(Object(x.jsx)(S,{title:e.title,stat:e.stat}))})),e.spaceEven?Object(x.jsx)("div",{className:"stat-cards-even",children:t}):Object(x.jsx)("div",{className:"stat-cards-between",children:t})}a(207);function A(e){var t=Object(v.useState)(!1),a=Object(O.a)(t,2),s=a[0],n=a[1];return Object(x.jsxs)("div",{children:[Object(x.jsxs)("button",{className:"dropdown-menu-btn",onClick:function(){return n((function(e){return!e}))},children:[Object(x.jsx)("p",{className:"dropdown-menu-btn-text",children:e.chartView}),s?Object(x.jsx)("img",{className:"dropdown-menu-arrow rotate-arrow",src:"./assets/icons/down-arrow.svg"}):Object(x.jsx)("img",{className:"dropdown-menu-arrow",src:"./assets/icons/down-arrow.svg"})]}),s?Object(x.jsx)("div",{className:"menu",children:Object(x.jsx)("button",{onClick:function(){return t=N,e.setChartView(t),void n((function(e){return!e}));var t},className:"dropdown-menu-btn",children:Object(x.jsx)("p",{className:"dropdown-menu-btn-text",children:"Topics"})})}):Object(x.jsx)("div",{})]})}var C=a(354),T=a(347),I=a(98),z=a(99),H=a(351),q=a(104),V=a(182);function F(e){return Object(x.jsx)("div",{style:{width:"60%",height:400},children:Object(x.jsx)(C.a,{children:Object(x.jsxs)(T.a,{data:e.data,children:[Object(x.jsx)("defs",{children:Object(x.jsxs)("linearGradient",{id:"purpleGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[Object(x.jsx)("stop",{offset:"0%",stopColor:y,stopOpacity:.5}),Object(x.jsx)("stop",{offset:"100%",stopColor:y,stopOpacity:0})]})}),Object(x.jsx)(I.a,{dataKey:"index"}),Object(x.jsx)(z.a,{}),Object(x.jsx)(H.a,{stroke:"#eee",vertical:!1}),Object(x.jsx)(q.a,{}),Object(x.jsx)(V.a,{type:"monotone",dataKey:"responses",stroke:y,fillOpacity:1,fill:"url(#purpleGradient)"})]})})})}var G="https://api.civicqa.codes/v0",P="/responses",L="/responses?todayOnly=true",M="/responses?activeOnly=true&inquiryType=general",D="/responses?activeOnly=true&inquiryType=casework",J="/tags",R="/mailto";function B(){var e=Object(v.useState)(0),t=Object(O.a)(e,2),a=t[0],s=t[1],n=Object(v.useState)(0),r=Object(O.a)(n,2),c=r[0],i=r[1],o=Object(v.useState)([]),u=Object(O.a)(o,2),l=u[0],j=u[1],d=Object(v.useState)(N),b=Object(O.a)(d,2),h=b[0],m=b[1];function g(){return(g=Object(f.a)(p.a.mark((function e(){var t,a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("Authorization")||"",e.next=3,fetch(G+P,{method:"GET",headers:new Headers({Authorization:t})});case 3:if(!((a=e.sent).status>=300)){e.next=7;break}return console.log("Error retrieving form responses"),e.abrupt("return");case 7:return e.next=9,a.json();case 9:n=e.sent,s(n.length);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=Object(f.a)(p.a.mark((function e(){var t,a,s,n,r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("Authorization")||"",e.next=3,fetch(G+L,{method:"GET",headers:new Headers({Authorization:t})});case 3:if(!((a=e.sent).status>=300)){e.next=7;break}return console.log("Error retrieving form responses"),e.abrupt("return");case 7:return e.next=9,a.json();case 9:for(s=e.sent,n=new Map,s.forEach((function(e){var t=new Date(e.createdAt).getHours();n.has(t)?n.set(t,(n.get(t)||0)+1):n.set(t,1)})),r=[],c=0;c<24;c++)r.push({index:c,responses:n.get(c)||0});j(r),i(s.length);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(v.useEffect)((function(){!function(){g.apply(this,arguments)}(),function(){w.apply(this,arguments)}()}),[]),Object(x.jsxs)("div",{className:"trends",children:[Object(x.jsxs)("div",{className:"chart-heading",children:[Object(x.jsx)("h2",{className:"chart-title",children:"Today's trends"}),Object(x.jsx)("div",{className:"dropdown-menu",children:Object(x.jsx)(A,{chartView:h,setChartView:m})})]}),Object(x.jsxs)("div",{className:"chart-stats",children:[Object(x.jsx)(F,{data:l}),Object(x.jsxs)("div",{className:"chart-stats-cards",children:[Object(x.jsx)(S,{title:"Total",stat:a}),Object(x.jsx)(S,{title:"Today",stat:c})]})]})]})}a(338);function U(){var e=localStorage.getItem("Authorization")||"",t=Object(v.useState)(0),a=Object(O.a)(t,2),s=a[0],n=a[1],r=Object(v.useState)(0),c=Object(O.a)(r,2),i=c[0],o=c[1],u=function(){var t=Object(f.a)(p.a.mark((function t(){var a,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(G+M,{method:"GET",headers:new Headers({Authorization:e})});case 2:if(!((a=t.sent).status>=300)){t.next=6;break}return console.log("Error retrieving form responses"),t.abrupt("return");case 6:return t.next=8,a.json();case 8:s=t.sent,n(s.length);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),l=function(){var t=Object(f.a)(p.a.mark((function t(){var a,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(G+D,{method:"GET",headers:new Headers({Authorization:e})});case 2:if(!((a=t.sent).status>=300)){t.next=6;break}return console.log("Error retrieving form responses"),t.abrupt("return");case 6:return t.next=8,a.json();case 8:s=t.sent,o(s.length);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(v.useEffect)((function(){u(),l()}),[]);var j=[{title:"Active General Inquiries",stat:s},{title:"Active Casework",stat:i}];return Object(x.jsxs)("div",{className:"dashboard",children:[Object(x.jsx)(E,{spaceEven:!0,cards:j}),Object(x.jsx)(B,{})]})}function Q(e){return Object(x.jsx)("div",{children:Object(x.jsx)("h1",{className:"sub-dash-title",children:e.title})})}a(339);function K(e){return Object(x.jsxs)("div",{className:"sub-dash-card",children:[Object(x.jsx)("p",{className:"sub-dash-card-name",children:e.data.name}),Object(x.jsx)("button",{className:"sub-dash-card-btn",onClick:function(){return e.changeViewFunc(e.data)},children:"View"}),Object(x.jsx)("p",{className:"sub-dash-card-value",children:e.data.value})]})}function Y(e){return Object(x.jsx)("div",{children:Object(x.jsxs)("div",{className:"sub-dash-sub-header",children:[Object(x.jsx)("h2",{className:"sub-dash-sub-title",children:e.title}),e.subHeaderValue?Object(x.jsx)("h1",{className:"sub-dash-sub-number",children:e.subHeaderValue}):null,Object(x.jsx)("hr",{className:"sub-dash-line"})]})})}a(340);function _(e){var t=[];return e.data.forEach((function(a){return t.push(Object(x.jsx)(K,{data:a,changeViewFunc:e.changeViewFunc}))})),Object(x.jsx)("div",{children:Object(x.jsxs)("div",{children:[Object(x.jsx)(Y,{title:e.title,subHeaderValue:e.subHeaderValue?e.subHeaderValue:void 0}),e.fullPageView?Object(x.jsx)("div",{className:"sub-dash-cards-long",children:t}):Object(x.jsx)("div",{className:"sub-dash-cards-short",children:t})]})})}a(168);function W(e){return Object(x.jsxs)("div",{className:"tag",children:[Object(x.jsx)("p",{className:"tag-value",children:"#"+e.value}),Object(x.jsx)("button",{className:"tag-remove-btn",onClick:function(){return e.remove(e.value)},children:Object(x.jsx)("img",{className:"icon",src:"./assets/icons/remove.svg"})})]})}function X(e){var t=Object(v.useRef)(null),a=Object(v.useState)(""),s=Object(O.a)(a,2),n=s[0],r=s[1],c=Object(v.useState)(!1),i=Object(O.a)(c,2),o=i[0],u=i[1];function l(t){t.preventDefault(),n.length>0&&e.addTag(n),u(!1),r("")}function j(e){t.current&&!t.current.contains(e.target)&&u(!1)}Object(v.useEffect)((function(){return document.addEventListener("mousedown",j),function(){document.removeEventListener("mousedown",j)}}),[]);var d=[];return e.values.forEach((function(t){d.push(Object(x.jsx)(W,{value:t,remove:e.removeTag}))})),Object(x.jsxs)("div",{className:"tags-container",children:[d,o?Object(x.jsx)("div",{children:Object(x.jsx)("form",{onSubmit:function(e){return l(e)},children:Object(x.jsx)("input",{ref:t,className:"tag-add-input",type:"text",placeholder:"#",onChange:function(e){return r(e.target.value)}})})}):Object(x.jsx)("button",{className:"tag-add-btn",onClick:function(){return u(!0)},children:Object(x.jsx)("img",{className:"icon",src:"./assets/icons/plus.svg"})})]})}a(341);function Z(e){var t=Object(v.useState)(!0),a=Object(O.a)(t,2),s=a[0],n=a[1],r=Object(v.useState)([]),c=Object(O.a)(r,2),i=c[0],o=c[1],u=Object(v.useState)(""),l=Object(O.a)(u,2),j=l[0],d=l[1];function b(){return(b=Object(f.a)(p.a.mark((function t(){var a,s,n,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={to:[e.email],subject:e.subject,body:j},s=JSON.stringify(a),t.next=4,fetch(G+R,{method:"POST",body:s,headers:new Headers({"Content-Type":"application/json"})});case 4:if(!((n=t.sent).status>=300)){t.next=8;break}return console.log("Error creating mailto"),t.abrupt("return");case 8:return t.next=10,n.text();case 10:r=t.sent,window.location.href=r;case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var h=function(){var t=Object(f.a)(p.a.mark((function t(){var a,s,n,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=localStorage.getItem("Authorization")||"",t.next=3,fetch(G+P+"/"+e.responseId+J,{method:"GET",headers:new Headers({Authorization:a})});case 3:if(!((s=t.sent).status>=300)){t.next=7;break}return console.log("Error retreiving response tags"),t.abrupt("return");case 7:return t.next=9,s.json();case 9:n=t.sent,r=[],n.forEach((function(e){r.push(e.value)})),o(r);case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();function m(){return(m=Object(f.a)(p.a.mark((function t(a){var s,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=localStorage.getItem("Authorization")||"",n=JSON.stringify({value:a}),t.next=4,fetch(G+P+"/"+e.responseId+J,{method:"DELETE",body:n,headers:new Headers({Authorization:s,"Content-Type":"application/json"})});case 4:if(!(t.sent.status>=300)){t.next=8;break}return console.log("Error creating tag"),t.abrupt("return");case 8:h();case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function g(){return(g=Object(f.a)(p.a.mark((function t(a){var s,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=localStorage.getItem("Authorization")||"",n=JSON.stringify({value:a}),t.next=4,fetch(G+P+"/"+e.responseId+J,{method:"POST",body:n,headers:new Headers({Authorization:s,"Content-Type":"application/json"})});case 4:if(!(t.sent.status>=300)){t.next=8;break}return console.log("Error creating tag"),t.abrupt("return");case 8:h();case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var w=function(){var e=Object(f.a)(p.a.mark((function e(t,a){var s,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=localStorage.getItem("Authorization")||"",n=JSON.stringify({active:!a}),e.next=4,fetch(G+P+"/"+t,{method:"PATCH",body:n,headers:new Headers({Authorization:s})});case 4:if(!(e.sent.status>=300)){e.next=8;break}return console.log("Error marking form response as resolved"),e.abrupt("return");case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();function N(){return(N=Object(f.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n((function(e){return!e})),w(e.responseId,s);case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(v.useEffect)((function(){h()}),[]),Object(x.jsxs)("div",{children:[e.hideBackArrow?null:Object(x.jsx)("button",{className:"exit-button",onClick:function(){return e.setSpecificView()},children:Object(x.jsx)("img",{className:"back-arrow",src:"./assets/icons/arrow.svg"})}),Object(x.jsx)(Q,{title:e.title}),Object(x.jsx)(Y,{title:e.subject}),Object(x.jsx)(X,{addTag:function(e){return g.apply(this,arguments)},removeTag:function(e){return m.apply(this,arguments)},values:i}),Object(x.jsx)("div",{className:"form-response-container",children:Object(x.jsxs)("div",{className:"form-response",children:[Object(x.jsx)("p",{className:"form-response-body",children:e.body}),Object(x.jsx)("textarea",{className:"form-response-message",value:j,onChange:function(e){return d(e.target.value)}}),Object(x.jsxs)("div",{className:"resolved-send-container",children:[Object(x.jsxs)("label",{className:"resolved-label",children:[Object(x.jsx)("input",{id:"resolved-check-box",className:"resolved-check-box",type:"checkbox",onClick:function(){return function(){return N.apply(this,arguments)}()}}),"Resolved"]}),Object(x.jsx)("button",{className:"send-btn",placeholder:"Message",onClick:function(){return b.apply(this,arguments)},children:"Send"})]})]})})]})}function $(e){var t=e.header||"Form Inquiries",a=e.subjectTitle||"CURRENT INQUIRIES",s=e.hideInquiryBackArrow||!1,n=Object(v.useState)(!1),r=Object(O.a)(n,2),c=r[0],i=r[1],o=Object(v.useState)([]),u=Object(O.a)(o,2),l=u[0],j=u[1],d=Object(v.useState)(),b=Object(O.a)(d,2),h=b[0],m=b[1],g=function(){var e=Object(f.a)(p.a.mark((function e(){var t,a,s,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("Authorization")||"",e.next=3,fetch(G+"/responses?activeOnly=true",{method:"GET",headers:new Headers({Authorization:t})});case 3:if(!((a=e.sent).status>=300)){e.next=7;break}return console.log("Error retrieving form responses"),e.abrupt("return");case 7:return e.next=9,a.json();case 9:s=e.sent,n=[],s.forEach((function(e){var t=new Date(e.createdAt).toLocaleString("en-US");n.push({id:e.id,email:e.emailAddress,name:e.name+" / "+e.subject,value:t,body:e.body})})),j(n);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(v.useEffect)((function(){g()}),[]),Object(x.jsx)("div",{className:"dashboard sub-dashboard",children:c?Object(x.jsx)(Z,{responseId:(null===h||void 0===h?void 0:h.id)||"",email:(null===h||void 0===h?void 0:h.email)||"",title:"Inquiry",subject:(null===h||void 0===h?void 0:h.name)||"",body:(null===h||void 0===h?void 0:h.body)||"",setSpecificView:function(){i(!1),g()},hideBackArrow:s}):Object(x.jsxs)("div",{children:[Object(x.jsx)(Q,{title:t}),Object(x.jsx)(_,{title:a,data:e.data?e.data:l,changeViewFunc:function(e){i(!0),m(e)},fullPageView:!0,subHeaderValue:e.data?e.data.length:l.length})]})})}function ee(){var e=localStorage.getItem("Authorization")||"",t=Object(v.useState)(!1),a=Object(O.a)(t,2),s=a[0],n=a[1],r=Object(v.useState)(""),c=Object(O.a)(r,2),i=c[0],o=c[1],u=Object(v.useState)([]),l=Object(O.a)(u,2),j=l[0],d=l[1],b=Object(v.useState)(),h=Object(O.a)(b,2),m=h[0],g=h[1],w=Object(v.useState)([]),N=Object(O.a)(w,2),y=N[0],k=N[1],S=Object(v.useState)(0),A=Object(O.a)(S,2),C=A[0],T=A[1],I=Object(v.useState)(0),z=Object(O.a)(I,2),H=z[0],q=z[1],V=Object(v.useState)(0),F=Object(O.a)(V,2),P=F[0],L=F[1],D=function(){var t=Object(f.a)(p.a.mark((function t(){var a,s,n,r,c,i;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(G+M,{method:"GET",headers:new Headers({Authorization:e})});case 2:if(!((a=t.sent).status>=300)){t.next=6;break}return console.log("Error retrieving form responses"),t.abrupt("return");case 6:return t.next=8,a.json();case 8:s=t.sent,n=[],r=new Map,c=new Map,s.forEach((function(e){var t=new Date(e.createdAt).toLocaleString("en-US"),a=e.tags,s={id:e.id,email:e.emailAddress,name:e.name+" / "+e.subject,value:t,body:e.body};a.forEach((function(e){if(r.has(e.value)){var t=r.get(e.value);null===t||void 0===t||t.push(s),r.set(e.value,t||[])}else{var a=[];a.push(s),r.set(e.value,a)}c.set(e.value,(c.get(e.value)||0)+1)})),n.push(s)})),i=[],Array.from(c.keys()).forEach((function(e){var t=" inquiry";(c.get(e)||0)>1&&(t=" inquiries"),i.push({name:e,value:c.get(e)+t})})),i.sort((function(e,t){return e.value>t.value||e.value===t.value?-1:1})),L(i.length),q(n.length),k(i),g(r);case 20:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),J=function(){var t=Object(f.a)(p.a.mark((function t(){var a,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(G+"/responses?activeOnly=true&inquiryType=general&todayOnly=true",{method:"GET",headers:new Headers({Authorization:e})});case 2:if(!((a=t.sent).status>=300)){t.next=6;break}return console.log("Error retrieving form responses"),t.abrupt("return");case 6:return t.next=8,a.json();case 8:s=t.sent,T(s.length);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(v.useEffect)((function(){D(),J()}),[]);var R=[{title:"New Today",stat:C},{title:"Total",stat:H},{title:"Topics",stat:P}];return s?Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:"dashboard sub-dashboard",children:Object(x.jsx)("button",{className:"exit-button",onClick:function(){n(!1),D()},children:Object(x.jsx)("img",{className:"back-arrow",src:"./assets/icons/arrow.svg"})})}),Object(x.jsx)($,{header:"General",subjectTitle:i,data:j,hideInquiryBackArrow:!0})]}):Object(x.jsx)("div",{className:"dashboard sub-dashboard",children:Object(x.jsxs)("div",{children:[Object(x.jsx)(Q,{title:"General Topics"}),Object(x.jsx)(_,{title:"TOPICS",data:y,changeViewFunc:function(e){o(e.name),d((null===m||void 0===m?void 0:m.get(e.name))||[]),n(!0)},fullPageView:!1}),Object(x.jsxs)("div",{className:"sub-summary",children:[Object(x.jsx)(Y,{title:"SUMMARY",subHeaderValue:"Active Inquiries"}),Object(x.jsx)(E,{spaceEven:!1,cards:R})]})]})})}function te(){var e=localStorage.getItem("Authorization")||"",t=Object(v.useState)(!1),a=Object(O.a)(t,2),s=a[0],n=a[1],r=Object(v.useState)(""),c=Object(O.a)(r,2),i=c[0],o=c[1],u=Object(v.useState)([]),l=Object(O.a)(u,2),j=l[0],d=l[1],b=Object(v.useState)(),h=Object(O.a)(b,2),m=h[0],g=h[1],w=Object(v.useState)([]),N=Object(O.a)(w,2),y=N[0],k=N[1],S=Object(v.useState)(0),A=Object(O.a)(S,2),C=A[0],T=A[1],I=Object(v.useState)(0),z=Object(O.a)(I,2),H=z[0],q=z[1],V=Object(v.useState)(0),F=Object(O.a)(V,2),P=F[0],L=F[1],M=function(){var t=Object(f.a)(p.a.mark((function t(){var a,s,n,r,c,i;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(G+D,{method:"GET",headers:new Headers({Authorization:e})});case 2:if(!((a=t.sent).status>=300)){t.next=6;break}return console.log("Error retrieving form responses"),t.abrupt("return");case 6:return t.next=8,a.json();case 8:s=t.sent,n=[],r=new Map,c=new Map,s.forEach((function(e){var t=new Date(e.createdAt).toLocaleString("en-US"),a=e.tags,s={id:e.id,email:e.emailAddress,name:e.name+" / "+e.subject,value:t,body:e.body};a.forEach((function(e){if(r.has(e.value)){var t=r.get(e.value);null===t||void 0===t||t.push(s),r.set(e.value,t||[])}else{var a=[];a.push(s),r.set(e.value,a)}c.set(e.value,(c.get(e.value)||0)+1)})),n.push(s)})),i=[],Array.from(c.keys()).forEach((function(e){var t=" case";(c.get(e)||0)>1&&(t=" cases"),i.push({name:e,value:c.get(e)+t})})),i.sort((function(e,t){return e.value>t.value||e.value===t.value?-1:1})),L(i.length),q(n.length),k(i),g(r);case 20:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),J=function(){var t=Object(f.a)(p.a.mark((function t(){var a,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(G+"/responses?activeOnly=true&inquiryType=casework&todayOnly=true",{method:"GET",headers:new Headers({Authorization:e})});case 2:if(!((a=t.sent).status>=300)){t.next=6;break}return console.log("Error retrieving form responses"),t.abrupt("return");case 6:return t.next=8,a.json();case 8:s=t.sent,T(s.length);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(v.useEffect)((function(){M(),J()}),[]);var R=[{title:"New Today",stat:C},{title:"Total",stat:H},{title:"Topics",stat:P}];return s?Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:"dashboard sub-dashboard",children:Object(x.jsx)("button",{className:"exit-button",onClick:function(){n(!1),M()},children:Object(x.jsx)("img",{className:"back-arrow",src:"./assets/icons/arrow.svg"})})}),Object(x.jsx)($,{header:"Casework",subjectTitle:i,data:j,hideInquiryBackArrow:!0})]}):Object(x.jsx)("div",{className:"dashboard sub-dashboard",children:Object(x.jsxs)("div",{children:[Object(x.jsx)(Q,{title:"Casework Topics"}),Object(x.jsx)(_,{title:"TOPICS",data:y,changeViewFunc:function(e){o(e.name),d((null===m||void 0===m?void 0:m.get(e.name))||[]),n(!0)},fullPageView:!1}),Object(x.jsxs)("div",{className:"sub-summary",children:[Object(x.jsx)(Y,{title:"SUMMARY",subHeaderValue:"Active Cases"}),Object(x.jsx)(E,{spaceEven:!1,cards:R})]})]})})}a(342);function ae(e){return Object(x.jsxs)("div",{className:"form-card",children:[Object(x.jsx)("h1",{className:"form-card-name",children:e.name}),Object(x.jsx)("button",{className:"form-card-btn",onClick:function(){return e.getForm(e.id)},children:"Copy iFrame embed link"})]})}a(343);function se(){var e=Object(v.useState)([]),t=Object(O.a)(e,2),a=t[0],s=t[1],n=Object(v.useState)(""),r=Object(O.a)(n,2),c=r[0],i=r[1],o=function(){var e=Object(f.a)(p.a.mark((function e(){var t,a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("Authorization")||"",e.next=3,fetch(G+"/forms",{method:"GET",headers:new Headers({Authorization:t})});case 3:if(!((a=e.sent).status>=300)){e.next=7;break}return alert("There was an error trying to get your forms."),e.abrupt("return");case 7:return e.next=9,a.json();case 9:n=e.sent,r=[],n.forEach((function(e){var t=e.id,a=e.name;r.push({id:t,name:a})})),s(r);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function u(e){var t='<iframe src="'+G+"/form/"+e+'"></iframe>';navigator.clipboard.writeText(t)}var l=function(){var e=Object(f.a)(p.a.mark((function e(t){var a,s,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=localStorage.getItem("Authorization")||"",s={name:c},n=JSON.stringify(s),e.next=6,fetch(G+"/forms",{method:"POST",body:n,headers:new Headers({"Content-Type":"application/json",Authorization:a})});case 6:if(!(e.sent.status>=300)){e.next=10;break}return alert("There was an error trying to get your forms."),e.abrupt("return");case 10:i(""),o();case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(v.useEffect)((function(){o()}),[]);var j=[];return a.forEach((function(e){return j.push(Object(x.jsx)(ae,{id:e.id,name:e.name,getForm:u}))})),Object(x.jsxs)("div",{className:"dashboard subdashboard",children:[Object(x.jsx)(Q,{title:"Your Forms"}),Object(x.jsx)("div",{className:"form-cards",children:j}),Object(x.jsx)("hr",{className:"forms-create-divider"}),Object(x.jsxs)("div",{className:"new-form-container",children:[Object(x.jsx)("h1",{children:"Create a form"}),Object(x.jsxs)("form",{className:"new-form",autoComplete:"off",onSubmit:l,children:[Object(x.jsx)("input",{className:"new-form-input",name:"name",type:"text",value:c,placeholder:"Form Name",onChange:function(e){return i(e.target.value)},required:!0}),Object(x.jsx)("input",{className:"new-form-create-btn",type:"submit",value:"Create"})]})]})]})}var ne=a(352),re=a(185);function ce(){var e=Object(v.useState)(),t=Object(O.a)(e,2),a=t[0],s=t[1],n=function(){var e=Object(f.a)(p.a.mark((function e(){var t,a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("Authorization")||"",e.next=3,fetch(G+"/tags",{method:"GET",headers:new Headers({Authorization:t})});case 3:if(!((a=e.sent).status>=300)){e.next=7;break}return console.log("Error retrieving form responses"),e.abrupt("return");case 7:return n=new Map,e.next=10,a.json();case 10:e.sent.forEach((function(e){n.has(e.value)?n.set(e.value,(n.get(e.value)||0)+1):n.set(e.value,1)})),r=[],Array.from(n.keys()).forEach((function(e){r.push({name:e,count:n.get(e)||0})})),r.sort((function(e,t){return e.count>t.count?-1:e.count<t.count?1:0})),r=r.slice(0,5),s(r);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(v.useEffect)((function(){n()}),[]),Object(x.jsxs)("div",{className:"dashboard sub-dashboard view",children:[Object(x.jsx)(Q,{title:"Engagement Reports"}),Object(x.jsx)("h2",{children:"Most Frequent Topics"}),Object(x.jsx)("div",{style:{width:"100%",height:500},children:Object(x.jsx)(C.a,{children:Object(x.jsxs)(ne.a,{data:a,margin:{top:5,right:30,left:20,bottom:5},children:[Object(x.jsx)(I.a,{dataKey:"name"}),Object(x.jsx)(z.a,{}),Object(x.jsx)(q.a,{}),Object(x.jsx)(re.a,{dataKey:"count",fill:"#855CF8"})]})})})]})}function ie(){return Object(x.jsx)("div",{})}a(344);function oe(){return Object(x.jsxs)("div",{className:"landing-page",children:[Object(x.jsxs)("div",{className:"landing-logo-title-container",children:[Object(x.jsx)("img",{className:"landing-logo",src:"./assets/icons/logo.png"}),Object(x.jsx)("h1",{className:"landing-title",children:"Civic QA"})]}),Object(x.jsxs)("div",{className:"landing-btn-container",children:[Object(x.jsx)(r.b,{className:"landing-btn",to:"/signup",children:"Signup"}),Object(x.jsx)(r.b,{className:"landing-btn",to:"login",children:"Login"})]}),Object(x.jsxs)("div",{className:"project-container",children:[Object(x.jsx)("div",{className:"project-overview",children:Object(x.jsx)("h1",{className:"landing-sub-title",children:"What is Civic QA?"})}),Object(x.jsx)("div",{className:"stakeholders",children:Object(x.jsx)("h1",{className:"landing-sub-title",children:"Legislative Assistants"})}),Object(x.jsx)("div",{className:"project-solution",children:Object(x.jsx)("h1",{className:"landing-sub-title",children:"How does Civic QA help?"})}),Object(x.jsxs)("div",{className:"about-team",children:[Object(x.jsx)("h1",{className:"landing-sub-title",children:"Meet the team!"}),Object(x.jsx)("img",{className:"teammate-img",src:"./assets/images/rafi.jpg"}),Object(x.jsx)("img",{className:"teammate-img",src:"./assets/images/amit.jpg"}),Object(x.jsx)("img",{className:"teammate-img",src:"./assets/images/lia.jpg"}),Object(x.jsx)("img",{className:"teammate-img",src:"./assets/images/vivian.jpg"})]})]})]})}a(169);function ue(e){var t=Object(v.useState)(""),a=Object(O.a)(t,2),s=a[0],n=a[1],c=Object(v.useState)(""),i=Object(O.a)(c,2),o=i[0],u=i[1],l=Object(v.useState)(""),j=Object(O.a)(l,2),d=j[0],b=j[1],h=Object(v.useState)(""),m=Object(O.a)(h,2),g=m[0],w=m[1],N=Object(v.useState)(""),y=Object(O.a)(N,2),k=y[0],S=y[1],E=function(){var t=Object(f.a)(p.a.mark((function t(a){var n,r,c,i;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n={email:d,password:g,passwordConfirm:k,firstName:s,lastName:o},r=JSON.stringify(n),t.next=5,fetch(G+"/signup",{method:"POST",body:r,headers:new Headers({"Content-Type":"application/json"})});case 5:if(!((c=t.sent).status>=400)){t.next=9;break}return alert("Invalid email or password"),t.abrupt("return");case 9:i=c.headers.get("Authorization"),e.userLogin(i);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(x.jsx)("div",{className:"signup-login-page",children:Object(x.jsxs)("div",{className:"signup-login-container",children:[Object(x.jsx)("img",{className:"signup-login-logo",src:"./assets/icons/logo.png"}),Object(x.jsx)("h1",{className:"signup-login-title",children:"Civic QA"}),Object(x.jsxs)("form",{className:"signup-login-form",autoComplete:"off",onSubmit:E,children:[Object(x.jsx)("input",{className:"signup-login-form-input signup-login-form-text",name:"fname",type:"text",value:s,placeholder:"First Name",onChange:function(e){return n(e.target.value)},required:!0}),Object(x.jsx)("input",{className:"signup-login-form-input signup-login-form-text",name:"lname",type:"text",value:o,placeholder:"Last Name",onChange:function(e){return u(e.target.value)},required:!0}),Object(x.jsx)("input",{className:"signup-login-form-input signup-login-form-text",name:"email",type:"text",value:d,placeholder:"Email",onChange:function(e){return b(e.target.value)},required:!0}),Object(x.jsx)("input",{className:"signup-login-form-input signup-login-form-text",name:"password",type:"password",value:g,placeholder:"Password",onChange:function(e){return w(e.target.value)},required:!0}),Object(x.jsx)("input",{className:"signup-login-form-input signup-login-form-text",name:"confirm-password",type:"password",value:k,placeholder:"Confirm Password",onChange:function(e){return S(e.target.value)},required:!0}),Object(x.jsx)("input",{className:"signup-login-form-input signup-login-btn",type:"submit",value:"Sign up"})]}),Object(x.jsx)(r.b,{to:"login",className:"switch-signup-login-btn",onClick:function(){n(""),u(""),b(""),w(""),S("")},children:"Already have an account? Login"})]})})}function le(e){var t=Object(v.useState)(""),a=Object(O.a)(t,2),s=a[0],n=a[1],c=Object(v.useState)(""),i=Object(O.a)(c,2),o=i[0],u=i[1],l=function(){var t=Object(f.a)(p.a.mark((function t(a){var n,r,c,i;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n={email:s,password:o},r=JSON.stringify(n),t.next=5,fetch(G+"/login",{method:"POST",body:r,headers:new Headers({"Content-Type":"application/json"})});case 5:if(c=t.sent,console.log(c),!(c.status>=400)){t.next=10;break}return alert("Invalid email or password"),t.abrupt("return");case 10:i=c.headers.get("Authorization"),e.userLogin(i);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(x.jsx)("div",{className:"signup-login-page",children:Object(x.jsxs)("div",{className:"signup-login-container",children:[Object(x.jsx)("img",{className:"signup-login-logo",src:"./assets/icons/logo.png"}),Object(x.jsx)("h1",{className:"signup-login-title",children:"Civic QA"}),Object(x.jsxs)("form",{className:"signup-login-form",autoComplete:"off",onSubmit:l,children:[Object(x.jsx)("input",{className:"signup-login-form-input signup-login-form-text",name:"email",type:"text",value:s,placeholder:"Email",onChange:function(e){return n(e.target.value)},required:!0}),Object(x.jsx)("input",{className:"signup-login-form-input signup-login-form-text",name:"password",type:"password",value:o,placeholder:"Password",onChange:function(e){return u(e.target.value)},required:!0}),Object(x.jsx)("input",{className:"signup-login-form-input signup-login-btn",type:"submit",value:"Login"})]}),Object(x.jsx)(r.b,{to:"/signup",className:"switch-signup-login-btn",onClick:function(){n(""),u("")},children:"New? Create Account"})]})})}function je(){var e=localStorage.getItem("Authorization"),t=Object(v.useState)(e||""),a=Object(O.a)(t,2),s=a[0],n=a[1];function r(){return(r=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(G+"/logout",{method:"POST",headers:new Headers({Authorization:s})});case 2:e.sent.status>=400&&console.log("Failed to logout"),localStorage.removeItem("Authorization"),n("");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(e){localStorage.setItem("Authorization",e),n(e),console.log(s)}return Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)(g.b,{exact:!0,path:"/",component:oe}),Object(x.jsx)(g.b,{exact:!0,path:"/signup",component:function(){return Object(x.jsx)(ue,{userLogin:c})}}),Object(x.jsx)(g.b,{exact:!0,path:"/login",component:function(){return Object(x.jsx)(le,{userLogin:c})}}),s?Object(x.jsx)(g.a,{to:"/dashboard"}):Object(x.jsx)(g.a,{to:"/"}),s?Object(x.jsxs)("div",{children:[Object(x.jsx)(k,{userLogout:function(){return r.apply(this,arguments)}}),Object(x.jsxs)("div",{className:"view",children:[Object(x.jsx)(g.b,{exact:!0,path:"/dashboard",component:U}),Object(x.jsx)(g.b,{exact:!0,path:"/general",component:ee}),Object(x.jsx)(g.b,{exact:!0,path:"/casework",component:te}),Object(x.jsx)(g.b,{exact:!0,path:"/inquiries",component:$}),Object(x.jsx)(g.b,{exact:!0,path:"/forms",component:se}),Object(x.jsx)(g.b,{exact:!0,path:"/engagement-reports",component:ce}),Object(x.jsx)(g.b,{exact:!0,path:"/settings",component:ie})]})]}):null]})}a(345);var de=document.getElementById("root");n.a.render(Object(x.jsx)(r.a,{basename:"",children:Object(x.jsx)(c.a,{store:h,children:Object(x.jsx)(je,{})})}),de)}},[[346,1,2]]]);
//# sourceMappingURL=main.9541de0d.chunk.js.map